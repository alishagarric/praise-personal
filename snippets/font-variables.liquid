{% comment %} Set up custom heading font if its fields are filled out {% endcomment %}
{% if settings.custom_heading_font_link != blank and settings.custom_heading_font_family_name != blank %}
  {% assign custom_heading_font = true %}
  <link rel="stylesheet" href="{{ settings.custom_heading_font_link }}">

  {% style %}
    :root {
      --font-heading-family: {{ settings.custom_heading_font_family_name }};
      --font-heading-style: normal;
      --font-heading-weight: 400;
    }
  {% endstyle %}
{% comment %} Set up Shopify heading font if the custom heading font fields aren't filled out {% endcomment %}
{% else %}
  {% assign heading_font_bold = settings.type_heading_font | font_modify: 'weight', 'bold' %}
  {% assign heading_font_italic = settings.type_heading_font | font_modify: 'style', 'italic' %}
  {% assign heading_font_bold_italic = heading_font_bold | font_modify: 'style', 'italic' %}

  {% style %}
    {{ settings.type_heading_font | font_face: font_display: 'swap' }}
    {{ heading_font_bold | font_face: font_display: 'swap' }}
    {{ heading_font_italic | font_face: font_display: 'swap' }}
    {{ heading_font_bold_italic | font_face: font_display: 'swap' }}

    :root {
      --font-heading-family: {{ settings.type_header_font.family }}, {{ settings.type_header_font.fallback_families }};
      --font-heading-style: {{ settings.type_header_font.style }};
      --font-heading-weight: {{ settings.type_header_font.weight }};
    }
  {% endstyle %}
{% endif %}

{% comment %} Set up custom body font if its fields are filled out {% endcomment %}
{% if settings.custom_body_font_link != blank and settings.custom_body_font_family_name != blank %}
  {% assign custom_body_font = true %}
  <link rel="stylesheet" href="{{ settings.custom_body_font_link }}">

  {% style %}
    :root {
      --font-body-family: {{ settings.custom_body_font_family_name }};
      --font-body-style: normal;
      --font-body-weight: 400;
    }
  {% endstyle %}
{% comment %} Set up Shopify body font if the custom body font fields aren't filled out {% endcomment %}
{% else %}
  {% assign body_font_bold = settings.type_body_font | font_modify: 'weight', 'bold' %}
  {% assign body_font_italic = settings.type_body_font | font_modify: 'style', 'italic' %}
  {% assign body_font_bold_italic = body_font_bold | font_modify: 'style', 'italic' %}

  {% style %}
    {{ settings.type_body_font | font_face: font_display: 'swap' }}
    {{ body_font_bold | font_face: font_display: 'swap' }}
    {{ body_font_italic | font_face: font_display: 'swap' }}
    {{ body_font_bold_italic | font_face: font_display: 'swap' }}

    :root {
      --font-body-family: {{ settings.type_body_font.family }}, {{ settings.type_body_font.fallback_families }};
      --font-body-style: {{ settings.type_body_font.style }};
      --font-body-weight: {{ settings.type_body_font.weight }};
    }
  {% endstyle %}
{% endif %}

{% comment %} Check if we're using a system Shopify heading font {% endcomment %}
{% if custom_heading_font != true and settings.type_heading_font.system? %}
  {% assign system_heading_font = true %}
{% endif %}

{% comment %} Check if we're using a system Shopify body font {% endcomment %}
{% if custom_body_font != true and settings.type_body_font.system? %}
  {% assign system_body_font = true %}
{% endif %}

{% comment %} Load Shopify fonts if we're using one {% endcomment %}
{%- unless system_heading_font == true and system_body_font == true -%}
  <link rel="preconnect" href="https://fonts.shopifycdn.com" crossorigin>
{%- endunless -%}

{% comment %} Set up heading and body font scale variables {% endcomment %}
{% style %}
  :root {
    --font-body-scale: {{ settings.body_scale | divided_by: 100.0 }};
    --font-heading-scale: {{ settings.heading_scale | times: 1.0 | divided_by: settings.body_scale }};
  }
{% endstyle %}